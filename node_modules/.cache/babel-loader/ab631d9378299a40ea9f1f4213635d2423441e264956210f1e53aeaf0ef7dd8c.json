{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects\\\\app\\\\src\\\\components\\\\FileUploadCompact.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Upload, File, Trash2, Eye, Image as ImageIcon } from 'lucide-react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst FileUploadCompact = ({\n  currentFile,\n  onFileChange,\n  onFileRemove,\n  accept = '.pdf,.png,.jpg,.jpeg'\n}) => {\n  _s();\n  const [uploading, setUploading] = useState(false);\n  const handleFileSelect = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    // Validate file type\n    const allowedTypes = ['application/pdf', 'image/png', 'image/jpeg', 'image/jpg'];\n    if (!allowedTypes.includes(file.type)) {\n      alert('Chỉ chấp nhận file PDF, PNG, JPG!');\n      return;\n    }\n    setUploading(true);\n    try {\n      const reader = new FileReader();\n      reader.onload = event => {\n        onFileChange({\n          name: file.name,\n          url: event.target.result,\n          // Base64\n          size: file.size,\n          type: file.type,\n          uploaded_at: new Date().toISOString()\n        });\n        setUploading(false);\n      };\n      reader.onerror = () => {\n        alert('Lỗi khi đọc file!');\n        setUploading(false);\n      };\n      reader.readAsDataURL(file);\n    } catch (error) {\n      console.error('Upload error:', error);\n      alert('Lỗi khi upload file!');\n      setUploading(false);\n    }\n  };\n  const formatFileSize = bytes => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\n  };\n  const getFileIcon = type => {\n    if (type !== null && type !== void 0 && type.includes('pdf')) {\n      return /*#__PURE__*/_jsxDEV(File, {\n        className: \"w-4 h-4 text-red-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 14\n      }, this);\n    }\n    if (type !== null && type !== void 0 && type.includes('image')) {\n      return /*#__PURE__*/_jsxDEV(ImageIcon, {\n        className: \"w-4 h-4 text-blue-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 14\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(File, {\n      className: \"w-4 h-4 text-gray-500\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 12\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"inline-flex items-center gap-2\",\n    children: !currentFile ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: accept,\n        onChange: handleFileSelect,\n        className: \"hidden\",\n        id: `file-upload-${Math.random()}`,\n        disabled: uploading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: `file-upload-${Math.random()}`,\n        className: \"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-50 text-blue-700 border border-blue-200 rounded-lg hover:bg-blue-100 cursor-pointer text-sm font-medium transition-colors\",\n        children: uploading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-4 h-4 border-2 border-blue-700 border-t-transparent rounded-full animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u0110ang t\\u1EA3i...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Upload, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Ch\\u1ECDn file\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"inline-flex items-center gap-2 bg-green-50 border border-green-200 rounded-lg px-3 py-1.5\",\n      children: [getFileIcon(currentFile.type), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: currentFile.url,\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        className: \"text-sm text-green-700 hover:underline max-w-[200px] truncate\",\n        title: currentFile.name,\n        children: currentFile.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-xs text-green-600\",\n        children: [\"(\", formatFileSize(currentFile.size), \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onFileRemove,\n        className: \"p-1 text-red-600 hover:bg-red-100 rounded transition-colors\",\n        title: \"X\\xF3a file\",\n        type: \"button\",\n        children: /*#__PURE__*/_jsxDEV(Trash2, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n_s(FileUploadCompact, \"7fSqO2OqLYyCuGUs/ZTqKghpSFk=\");\n_c = FileUploadCompact;\nexport default FileUploadCompact;\nvar _c;\n$RefreshReg$(_c, \"FileUploadCompact\");","map":{"version":3,"names":["React","useState","Upload","File","Trash2","Eye","Image","ImageIcon","jsxDEV","_jsxDEV","Fragment","_Fragment","FileUploadCompact","currentFile","onFileChange","onFileRemove","accept","_s","uploading","setUploading","handleFileSelect","e","file","target","files","allowedTypes","includes","type","alert","reader","FileReader","onload","event","name","url","result","size","uploaded_at","Date","toISOString","onerror","readAsDataURL","error","console","formatFileSize","bytes","k","sizes","i","Math","floor","log","round","pow","getFileIcon","className","fileName","_jsxFileName","lineNumber","columnNumber","children","onChange","id","random","disabled","htmlFor","href","rel","title","onClick","_c","$RefreshReg$"],"sources":["C:/Projects/app/src/components/FileUploadCompact.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Upload, File, Trash2, Eye, Image as ImageIcon } from 'lucide-react';\r\n\r\nconst FileUploadCompact = ({ \r\n  currentFile, \r\n  onFileChange, \r\n  onFileRemove,\r\n  accept = '.pdf,.png,.jpg,.jpeg'\r\n}) => {\r\n  const [uploading, setUploading] = useState(false);\r\n\r\n  const handleFileSelect = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    // Validate file type\r\n    const allowedTypes = ['application/pdf', 'image/png', 'image/jpeg', 'image/jpg'];\r\n    if (!allowedTypes.includes(file.type)) {\r\n      alert('Chỉ chấp nhận file PDF, PNG, JPG!');\r\n      return;\r\n    }\r\n\r\n    setUploading(true);\r\n\r\n    try {\r\n      const reader = new FileReader();\r\n      \r\n      reader.onload = (event) => {\r\n        onFileChange({\r\n          name: file.name,\r\n          url: event.target.result, // Base64\r\n          size: file.size,\r\n          type: file.type,\r\n          uploaded_at: new Date().toISOString()\r\n        });\r\n        setUploading(false);\r\n      };\r\n      \r\n      reader.onerror = () => {\r\n        alert('Lỗi khi đọc file!');\r\n        setUploading(false);\r\n      };\r\n      \r\n      reader.readAsDataURL(file);\r\n    } catch (error) {\r\n      console.error('Upload error:', error);\r\n      alert('Lỗi khi upload file!');\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const formatFileSize = (bytes) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\r\n  };\r\n\r\n  const getFileIcon = (type) => {\r\n    if (type?.includes('pdf')) {\r\n      return <File className=\"w-4 h-4 text-red-500\" />;\r\n    }\r\n    if (type?.includes('image')) {\r\n      return <ImageIcon className=\"w-4 h-4 text-blue-500\" />;\r\n    }\r\n    return <File className=\"w-4 h-4 text-gray-500\" />;\r\n  };\r\n\r\n  return (\r\n    <div className=\"inline-flex items-center gap-2\">\r\n      {!currentFile ? (\r\n        <>\r\n          <input\r\n            type=\"file\"\r\n            accept={accept}\r\n            onChange={handleFileSelect}\r\n            className=\"hidden\"\r\n            id={`file-upload-${Math.random()}`}\r\n            disabled={uploading}\r\n          />\r\n          <label\r\n            htmlFor={`file-upload-${Math.random()}`}\r\n            className=\"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-50 text-blue-700 border border-blue-200 rounded-lg hover:bg-blue-100 cursor-pointer text-sm font-medium transition-colors\"\r\n          >\r\n            {uploading ? (\r\n              <>\r\n                <div className=\"w-4 h-4 border-2 border-blue-700 border-t-transparent rounded-full animate-spin\"></div>\r\n                <span>Đang tải...</span>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Upload className=\"w-4 h-4\" />\r\n                <span>Chọn file</span>\r\n              </>\r\n            )}\r\n          </label>\r\n        </>\r\n      ) : (\r\n        <div className=\"inline-flex items-center gap-2 bg-green-50 border border-green-200 rounded-lg px-3 py-1.5\">\r\n          {getFileIcon(currentFile.type)}\r\n          <a\r\n            href={currentFile.url}\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            className=\"text-sm text-green-700 hover:underline max-w-[200px] truncate\"\r\n            title={currentFile.name}\r\n          >\r\n            {currentFile.name}\r\n          </a>\r\n          <span className=\"text-xs text-green-600\">\r\n            ({formatFileSize(currentFile.size)})\r\n          </span>\r\n          <button\r\n            onClick={onFileRemove}\r\n            className=\"p-1 text-red-600 hover:bg-red-100 rounded transition-colors\"\r\n            title=\"Xóa file\"\r\n            type=\"button\"\r\n          >\r\n            <Trash2 className=\"w-4 h-4\" />\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FileUploadCompact;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}