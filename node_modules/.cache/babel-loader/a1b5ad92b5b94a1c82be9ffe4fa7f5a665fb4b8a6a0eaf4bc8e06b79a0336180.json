{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects\\\\app\\\\src\\\\pages\\\\AdvanceTransaction.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Plus, Search, Eye, TrendingDown, TrendingUp, DollarSign, Calendar, FileText, Upload, Download } from 'lucide-react';\nimport * as XLSX from 'xlsx';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst removeVietnameseTones = str => {\n  return str.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').replace(/đ/g, 'd').replace(/Đ/g, 'D');\n};\nfunction AdvanceTransaction() {\n  _s();\n  const loadEmployees = () => {\n    const saved = localStorage.getItem('employees_v2');\n    return saved ? JSON.parse(saved) : [];\n  };\n  const loadCashAccounts = () => {\n    const saved = localStorage.getItem('cash_accounts');\n    return saved ? JSON.parse(saved) : [];\n  };\n  const loadCashTransactions = () => {\n    const saved = localStorage.getItem('cash_transactions');\n    return saved ? JSON.parse(saved) : [];\n  };\n  const loadAdvanceTransactions = () => {\n    const saved = localStorage.getItem('advance_transactions');\n    return saved ? JSON.parse(saved) : [];\n  };\n  const loadSettlements = () => {\n    const saved = localStorage.getItem('advance_settlements');\n    return saved ? JSON.parse(saved) : [];\n  };\n  const [employees] = useState(loadEmployees);\n  const [cashAccounts, setCashAccounts] = useState(loadCashAccounts);\n  const [cashTransactions, setCashTransactions] = useState(loadCashTransactions);\n  const [transactions, setTransactions] = useState(loadAdvanceTransactions);\n  const [settlements, setSettlements] = useState(loadSettlements);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterMonth, setFilterMonth] = useState(new Date().toISOString().slice(0, 7));\n  const [filterStatus, setFilterStatus] = useState('all');\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showSettlementModal, setShowSettlementModal] = useState(false);\n  const [showBatchRefundModal, setShowBatchRefundModal] = useState(false);\n  const [selectedTransaction, setSelectedTransaction] = useState(null);\n  const [selectedEmployee, setSelectedEmployee] = useState(null);\n  const [addForm, setAddForm] = useState({\n    type: 'chi',\n    emp_id: '',\n    amount: '',\n    date: new Date().toISOString().slice(0, 10),\n    reason: 'Mua vật tư',\n    account_id: '',\n    note: ''\n  });\n  const [settlementForm, setSettlementForm] = useState({\n    items: [{\n      category: 'chi_phi_co_dinh',\n      amount: 0\n    }, {\n      category: 'chi_phi_san_xuat',\n      amount: 0\n    }, {\n      category: 'chi_phi_nguyen_vat_lieu',\n      amount: 0\n    }, {\n      category: 'chi_phi_sua_may',\n      amount: 0\n    }, {\n      category: 'chi_phi_van_chuyen',\n      amount: 0\n    }, {\n      category: 'chi_phi_khac',\n      amount: 0\n    }],\n    remaining_action: 'hoan_quy',\n    account_id: '',\n    note: ''\n  });\n  const expenseCategories = {\n    chi_phi_co_dinh: 'Chi phí cố định',\n    chi_phi_san_xuat: 'Chi phí sản xuất',\n    chi_phi_nguyen_vat_lieu: 'Chi phí nguyên vật liệu',\n    chi_phi_sua_may: 'Chi phí sửa máy móc',\n    chi_phi_van_chuyen: 'Chi phí vận chuyển',\n    chi_phi_khac: 'Chi phí khác'\n  };\n  useEffect(() => {\n    localStorage.setItem('advance_transactions', JSON.stringify(transactions));\n  }, [transactions]);\n  useEffect(() => {\n    localStorage.setItem('advance_settlements', JSON.stringify(settlements));\n  }, [settlements]);\n  useEffect(() => {\n    localStorage.setItem('cash_accounts', JSON.stringify(cashAccounts));\n  }, [cashAccounts]);\n  useEffect(() => {\n    localStorage.setItem('cash_transactions', JSON.stringify(cashTransactions));\n  }, [cashTransactions]);\n  const getEmployeeName = empId => {\n    const emp = employees.find(e => e.id === empId);\n    return emp ? `${emp.code} - ${emp.name}` : 'N/A';\n  };\n  const getAccountName = accountId => {\n    const account = cashAccounts.find(acc => acc.id === accountId);\n    return account ? account.ten : 'N/A';\n  };\n  const handleAddTransaction = () => {\n    if (!addForm.emp_id || !addForm.amount || !addForm.account_id) {\n      alert('Vui lòng điền đầy đủ thông tin!');\n      return;\n    }\n    const amount = parseFloat(addForm.amount);\n    if (amount <= 0) {\n      alert('Số tiền phải lớn hơn 0!');\n      return;\n    }\n    const account = cashAccounts.find(acc => acc.id === parseInt(addForm.account_id));\n    if (addForm.type === 'chi' && account.so_du < amount) {\n      alert(`Số dư không đủ!\\nSố dư: ${account.so_du.toLocaleString('vi-VN')} đ\\nCần: ${amount.toLocaleString('vi-VN')} đ`);\n      return;\n    }\n    const newTransaction = {\n      id: Date.now(),\n      type: addForm.type,\n      emp_id: parseInt(addForm.emp_id),\n      amount: amount,\n      date: addForm.date,\n      reason: addForm.reason,\n      account_id: parseInt(addForm.account_id),\n      status: 'chua_quyet_toan',\n      note: addForm.note,\n      created_date: new Date().toISOString()\n    };\n\n    // Update cash account\n    const updatedAccounts = cashAccounts.map(acc => {\n      if (acc.id === parseInt(addForm.account_id)) {\n        return {\n          ...acc,\n          so_du: addForm.type === 'chi' ? acc.so_du - amount : acc.so_du + amount\n        };\n      }\n      return acc;\n    });\n    setCashAccounts(updatedAccounts);\n\n    // Create cash transaction\n    const cashTransaction = {\n      id: Date.now() + 1,\n      tai_khoan_id: parseInt(addForm.account_id),\n      ngay: addForm.date,\n      loai: addForm.type === 'chi' ? 'chi' : 'thu',\n      danh_muc: 'tam_ung_nv',\n      doi_tuong: getEmployeeName(parseInt(addForm.emp_id)),\n      ten_doi_tuong: getEmployeeName(parseInt(addForm.emp_id)),\n      so_tien: amount,\n      ly_do: addForm.reason,\n      ghi_chu: `Tạm ứng - ${addForm.note}`,\n      nguoi_tao: 'Admin',\n      ngay_tao: new Date().toISOString()\n    };\n    setCashTransactions([...cashTransactions, cashTransaction]);\n    setTransactions([...transactions, newTransaction]);\n    setShowAddModal(false);\n    setAddForm({\n      type: 'chi',\n      emp_id: '',\n      amount: '',\n      date: new Date().toISOString().slice(0, 10),\n      reason: 'Mua vật tư',\n      account_id: '',\n      note: ''\n    });\n    alert(`Đã ${addForm.type === 'chi' ? 'chi' : 'thu'} tạm ứng thành công!`);\n  };\n  const handleSettlement = () => {\n    if (!selectedTransaction) return;\n    const totalSpent = settlementForm.items.reduce((sum, item) => sum + parseFloat(item.amount || 0), 0);\n    const remaining = selectedTransaction.amount - totalSpent;\n    if (totalSpent > selectedTransaction.amount) {\n      alert('Tổng chi vượt quá số tiền tạm ứng!');\n      return;\n    }\n    if (remaining > 0 && !settlementForm.account_id) {\n      alert('Vui lòng chọn tài khoản để hoàn tiền!');\n      return;\n    }\n    const newSettlement = {\n      id: Date.now(),\n      transaction_id: selectedTransaction.id,\n      settlement_date: new Date().toISOString().slice(0, 10),\n      items: settlementForm.items.filter(item => item.amount > 0),\n      total_spent: totalSpent,\n      remaining: remaining,\n      remaining_action: settlementForm.remaining_action,\n      account_id: settlementForm.account_id ? parseInt(settlementForm.account_id) : null,\n      note: settlementForm.note,\n      created_date: new Date().toISOString()\n    };\n    setSettlements([...settlements, newSettlement]);\n\n    // Update transaction status\n    setTransactions(transactions.map(t => t.id === selectedTransaction.id ? {\n      ...t,\n      status: 'da_quyet_toan'\n    } : t));\n\n    // Refund to cash account if needed\n    if (remaining > 0 && settlementForm.remaining_action === 'hoan_quy') {\n      const updatedAccounts = cashAccounts.map(acc => {\n        if (acc.id === parseInt(settlementForm.account_id)) {\n          return {\n            ...acc,\n            so_du: acc.so_du + remaining\n          };\n        }\n        return acc;\n      });\n      setCashAccounts(updatedAccounts);\n\n      // Create refund cash transaction\n      const refundTransaction = {\n        id: Date.now() + 1,\n        tai_khoan_id: parseInt(settlementForm.account_id),\n        ngay: new Date().toISOString().slice(0, 10),\n        loai: 'thu',\n        danh_muc: 'tam_ung_nv',\n        doi_tuong: getEmployeeName(selectedTransaction.emp_id),\n        ten_doi_tuong: getEmployeeName(selectedTransaction.emp_id),\n        so_tien: remaining,\n        ly_do: `Hoàn tạm ứng - ${selectedTransaction.reason}`,\n        ghi_chu: settlementForm.note,\n        nguoi_tao: 'Admin',\n        ngay_tao: new Date().toISOString()\n      };\n      setCashTransactions([...cashTransactions, refundTransaction]);\n    }\n    setShowSettlementModal(false);\n    setSelectedTransaction(null);\n    setSettlementForm({\n      items: [{\n        category: 'chi_phi_co_dinh',\n        amount: 0\n      }, {\n        category: 'chi_phi_san_xuat',\n        amount: 0\n      }, {\n        category: 'chi_phi_nguyen_vat_lieu',\n        amount: 0\n      }, {\n        category: 'chi_phi_sua_may',\n        amount: 0\n      }, {\n        category: 'chi_phi_van_chuyen',\n        amount: 0\n      }, {\n        category: 'chi_phi_khac',\n        amount: 0\n      }],\n      remaining_action: 'hoan_quy',\n      account_id: '',\n      note: ''\n    });\n    alert('Đã quyết toán thành công!');\n  };\n  const handleBatchRefund = empId => {\n    const empTransactions = transactions.filter(t => t.emp_id === empId && t.type === 'chi' && t.status === 'chua_quyet_toan');\n    setSelectedEmployee(empId);\n    setShowBatchRefundModal(true);\n  };\n  const handleImportExcel = e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = evt => {\n      try {\n        const data = new Uint8Array(evt.target.result);\n        const workbook = XLSX.read(data, {\n          type: 'array'\n        });\n        const sheet = workbook.Sheets[workbook.SheetNames[0]];\n        const jsonData = XLSX.utils.sheet_to_json(sheet);\n        const newItems = settlementForm.items.map(item => {\n          const row = jsonData.find(r => r['Loại chi phí'] === expenseCategories[item.category]);\n          return {\n            category: item.category,\n            amount: row ? parseFloat(row['Số tiền']) || 0 : 0\n          };\n        });\n        setSettlementForm({\n          ...settlementForm,\n          items: newItems\n        });\n        alert('Đã nhập dữ liệu từ Excel!');\n      } catch (error) {\n        alert('Lỗi đọc file Excel!');\n      }\n    };\n    reader.readAsArrayBuffer(file);\n  };\n  const handleExportTemplate = () => {\n    const data = Object.entries(expenseCategories).map(([key, value]) => ({\n      'Loại chi phí': value,\n      'Số tiền': 0\n    }));\n    const ws = XLSX.utils.json_to_sheet(data);\n    const wb = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(wb, ws, 'Template');\n    XLSX.writeFile(wb, 'Mau-quyet-toan.xlsx');\n  };\n  const getSummary = () => {\n    const monthTransactions = filteredTransactions;\n    const totalChi = monthTransactions.filter(t => t.type === 'chi').reduce((sum, t) => sum + t.amount, 0);\n    const totalThu = monthTransactions.filter(t => t.type === 'thu').reduce((sum, t) => sum + t.amount, 0);\n    const chuaQuyetToan = monthTransactions.filter(t => t.status === 'chua_quyet_toan').reduce((sum, t) => sum + t.amount, 0);\n    const daQuyetToan = monthTransactions.filter(t => t.status === 'da_quyet_toan').reduce((sum, t) => sum + t.amount, 0);\n    return {\n      totalChi,\n      totalThu,\n      chuaQuyetToan,\n      daQuyetToan,\n      count: monthTransactions.length\n    };\n  };\n  const filteredTransactions = transactions.filter(t => {\n    if (!t.date.startsWith(filterMonth)) return false;\n    if (filterStatus !== 'all' && t.status !== filterStatus) return false;\n    if (!searchTerm) return true;\n    const searchLower = removeVietnameseTones(searchTerm.toLowerCase());\n    const empName = getEmployeeName(t.emp_id);\n    const searchableFields = [empName, t.reason || '', t.note || ''];\n    return searchableFields.some(field => removeVietnameseTones(field.toLowerCase()).includes(searchLower));\n  }).sort((a, b) => new Date(b.date) - new Date(a.date));\n  const summary = getSummary();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold text-gray-800\",\n          children: \"Giao d\\u1ECBch t\\u1EA1m \\u1EE9ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"Qu\\u1EA3n l\\xFD t\\u1EA1m \\u1EE9ng mua h\\xE0ng & thu chi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowAddModal(true),\n        className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(Plus, {\n          className: \"w-5 h-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }, this), \"Th\\xEAm giao d\\u1ECBch\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-xl shadow-sm border p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-3 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium mb-2\",\n            children: \"Th\\xE1ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"month\",\n            value: filterMonth,\n            onChange: e => setFilterMonth(e.target.value),\n            className: \"w-full px-4 py-2 border rounded-lg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium mb-2\",\n            children: \"Tr\\u1EA1ng th\\xE1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: filterStatus,\n            onChange: e => setFilterStatus(e.target.value),\n            className: \"w-full px-4 py-2 border rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"all\",\n              children: \"T\\u1EA5t c\\u1EA3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"chua_quyet_toan\",\n              children: \"Ch\\u01B0a quy\\u1EBFt to\\xE1n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"da_quyet_toan\",\n              children: \"\\u0110\\xE3 quy\\u1EBFt to\\xE1n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium mb-2\",\n            children: \"T\\xECm ki\\u1EBFm\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative\",\n            children: [/*#__PURE__*/_jsxDEV(Search, {\n              className: \"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: searchTerm,\n              onChange: e => setSearchTerm(e.target.value),\n              placeholder: \"Nh\\xE2n vi\\xEAn, l\\xFD do...\",\n              className: \"w-full pl-10 pr-4 py-2 border rounded-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 7\n    }, this), filteredTransactions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-4 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gradient-to-br from-red-500 to-red-600 rounded-xl p-6 text-white\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-red-100 text-sm\",\n              children: \"T\\u1ED5ng chi\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-2xl font-bold mt-1\",\n              children: [(summary.totalChi / 1000000).toFixed(1), \"M\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TrendingDown, {\n            className: \"w-12 h-12 text-red-200\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-green-100 text-sm\",\n              children: \"T\\u1ED5ng thu\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-2xl font-bold mt-1\",\n              children: [(summary.totalThu / 1000000).toFixed(1), \"M\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TrendingUp, {\n            className: \"w-12 h-12 text-green-200\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-orange-100 text-sm\",\n              children: \"Ch\\u01B0a quy\\u1EBFt to\\xE1n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-2xl font-bold mt-1\",\n              children: [(summary.chuaQuyetToan / 1000000).toFixed(1), \"M\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Calendar, {\n            className: \"w-12 h-12 text-orange-200\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-blue-100 text-sm\",\n              children: \"\\u0110\\xE3 quy\\u1EBFt to\\xE1n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 434,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-2xl font-bold mt-1\",\n              children: [(summary.daQuyetToan / 1000000).toFixed(1), \"M\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(DollarSign, {\n            className: \"w-12 h-12 text-blue-200\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-xl shadow-sm border overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"w-full\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-gray-50\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\",\n                children: \"Ng\\xE0y\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\",\n                children: \"Lo\\u1EA1i\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\",\n                children: \"Nh\\xE2n vi\\xEAn\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\",\n                children: \"L\\xFD do\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase\",\n                children: \"S\\u1ED1 ti\\u1EC1n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase\",\n                children: \"Tr\\u1EA1ng th\\xE1i\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 453,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase\",\n                children: \"Thao t\\xE1c\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 454,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"divide-y\",\n            children: filteredTransactions.map(transaction => /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"hover:bg-gray-50\",\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-4 py-4 text-sm\",\n                children: new Date(transaction.date).toLocaleDateString('vi-VN')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-4 py-4\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `px-2 py-1 rounded-full text-xs font-medium ${transaction.type === 'chi' ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'}`,\n                  children: transaction.type === 'chi' ? 'Chi' : 'Thu'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 464,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 463,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-4 py-4 text-sm\",\n                children: getEmployeeName(transaction.emp_id)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 472,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-4 py-4 text-sm text-gray-600\",\n                children: transaction.reason\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-4 py-4 text-sm text-right\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `font-bold ${transaction.type === 'chi' ? 'text-red-600' : 'text-green-600'}`,\n                  children: [transaction.type === 'chi' ? '-' : '+', transaction.amount.toLocaleString('vi-VN'), \" \\u0111\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 475,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-4 py-4 text-center\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `px-2 py-1 rounded-full text-xs font-medium ${transaction.status === 'chua_quyet_toan' ? 'bg-orange-100 text-orange-800' : 'bg-green-100 text-green-800'}`,\n                  children: transaction.status === 'chua_quyet_toan' ? 'Chưa quyết toán' : 'Đã quyết toán'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 482,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 481,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-4 py-4\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-center gap-2\",\n                  children: [transaction.type === 'chi' && transaction.status === 'chua_quyet_toan' && /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => {\n                      setSelectedTransaction(transaction);\n                      setShowSettlementModal(true);\n                    },\n                    className: \"p-2 text-blue-600 hover:bg-blue-50 rounded-lg\",\n                    title: \"Quy\\u1EBFt to\\xE1n\",\n                    children: /*#__PURE__*/_jsxDEV(FileText, {\n                      className: \"w-4 h-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 501,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 493,\n                    columnNumber: 25\n                  }, this), transaction.status === 'da_quyet_toan' && /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => {\n                      const settlement = settlements.find(s => s.transaction_id === transaction.id);\n                      if (settlement) {\n                        alert(`Đã quyết toán:\\nTổng chi: ${settlement.total_spent.toLocaleString('vi-VN')} đ\\nCòn lại: ${settlement.remaining.toLocaleString('vi-VN')} đ`);\n                      }\n                    },\n                    className: \"p-2 text-green-600 hover:bg-green-50 rounded-lg\",\n                    title: \"Xem chi ti\\u1EBFt\",\n                    children: /*#__PURE__*/_jsxDEV(Eye, {\n                      className: \"w-4 h-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 515,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 505,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 491,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 490,\n                columnNumber: 19\n              }, this)]\n            }, transaction.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 9\n      }, this), filteredTransactions.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-12 text-gray-500\",\n        children: \"Kh\\xF4ng c\\xF3 giao d\\u1ECBch n\\xE0o\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 526,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 7\n    }, this), showAddModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-2xl w-full max-w-2xl\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border-b px-6 py-4\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-bold\",\n            children: \"Th\\xEAm giao d\\u1ECBch t\\u1EA1m \\u1EE9ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 535,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium mb-2\",\n                children: \"Lo\\u1EA1i giao d\\u1ECBch *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 540,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: addForm.type,\n                onChange: e => setAddForm({\n                  ...addForm,\n                  type: e.target.value\n                }),\n                className: \"w-full px-4 py-2 border rounded-lg\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"chi\",\n                  children: \"Chi t\\u1EA1m \\u1EE9ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 546,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"thu\",\n                  children: \"Thu ti\\u1EC1n\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 547,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 541,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium mb-2\",\n                children: \"Ng\\xE0y *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 551,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: addForm.date,\n                onChange: e => setAddForm({\n                  ...addForm,\n                  date: e.target.value\n                }),\n                className: \"w-full px-4 py-2 border rounded-lg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 552,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium mb-2\",\n                children: \"Nh\\xE2n vi\\xEAn *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 563,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: addForm.emp_id,\n                onChange: e => setAddForm({\n                  ...addForm,\n                  emp_id: e.target.value\n                }),\n                className: \"w-full px-4 py-2 border rounded-lg\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Ch\\u1ECDn nh\\xE2n vi\\xEAn\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 569,\n                  columnNumber: 21\n                }, this), employees.filter(e => e.status !== 'Nghỉ việc').map(emp => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: emp.id,\n                  children: [emp.code, \" - \", emp.name]\n                }, emp.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 571,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 564,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 562,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium mb-2\",\n                children: \"S\\u1ED1 ti\\u1EC1n *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 578,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                value: addForm.amount,\n                onChange: e => setAddForm({\n                  ...addForm,\n                  amount: e.target.value\n                }),\n                placeholder: \"VD: 10000000\",\n                className: \"w-full px-4 py-2 border rounded-lg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 579,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 577,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 561,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium mb-2\",\n              children: \"L\\xFD do *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 590,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: addForm.reason,\n              onChange: e => setAddForm({\n                ...addForm,\n                reason: e.target.value\n              }),\n              placeholder: \"Mua v\\u1EADt t\\u01B0, \\u0110i c\\xF4ng t\\xE1c...\",\n              className: \"w-full px-4 py-2 border rounded-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 591,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 589,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium mb-2\",\n              children: \"T\\xE0i kho\\u1EA3n *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 601,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: addForm.account_id,\n              onChange: e => setAddForm({\n                ...addForm,\n                account_id: e.target.value\n              }),\n              className: \"w-full px-4 py-2 border rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Ch\\u1ECDn t\\xE0i kho\\u1EA3n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 607,\n                columnNumber: 19\n              }, this), cashAccounts.filter(acc => acc.trang_thai === 'active').map(acc => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: acc.id,\n                children: [acc.ten, \" (\", acc.so_du.toLocaleString('vi-VN'), \" \\u0111)\"]\n              }, acc.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 609,\n                columnNumber: 21\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 602,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 600,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium mb-2\",\n              children: \"Ghi ch\\xFA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 617,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: addForm.note,\n              onChange: e => setAddForm({\n                ...addForm,\n                note: e.target.value\n              }),\n              placeholder: \"Ghi ch\\xFA th\\xEAm...\",\n              className: \"w-full px-4 py-2 border rounded-lg\",\n              rows: \"2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 618,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 616,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border-t px-6 py-4 flex justify-end gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setShowAddModal(false);\n              setAddForm({\n                type: 'chi',\n                emp_id: '',\n                amount: '',\n                date: new Date().toISOString().slice(0, 10),\n                reason: 'Mua vật tư',\n                account_id: '',\n                note: ''\n              });\n            },\n            className: \"px-4 py-2 border rounded-lg hover:bg-gray-50\",\n            children: \"H\\u1EE7y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 628,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleAddTransaction,\n            className: \"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\",\n            children: \"Th\\xEAm\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 645,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 532,\n      columnNumber: 9\n    }, this), showSettlementModal && selectedTransaction && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sticky top-0 bg-white border-b px-6 py-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-bold\",\n            children: \"Quy\\u1EBFt to\\xE1n t\\u1EA1m \\u1EE9ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 661,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600\",\n            children: [getEmployeeName(selectedTransaction.emp_id), \" - \", selectedTransaction.amount.toLocaleString('vi-VN'), \" \\u0111\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 662,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 660,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-semibold\",\n              children: \"Chi ti\\u1EBFt chi ph\\xED\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 668,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleExportTemplate,\n                className: \"px-3 py-1 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-1\",\n                children: [/*#__PURE__*/_jsxDEV(Download, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 674,\n                  columnNumber: 21\n                }, this), \"T\\u1EA3i m\\u1EABu\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 670,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"px-3 py-1 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-1 cursor-pointer\",\n                children: [/*#__PURE__*/_jsxDEV(Upload, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 677,\n                  columnNumber: 21\n                }, this), \"Nh\\u1EADp Excel\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  accept: \".xlsx,.xls\",\n                  onChange: handleImportExcel,\n                  className: \"hidden\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 678,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 676,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 669,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 667,\n            columnNumber: 15\n          }, this), settlementForm.items.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-4 items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-sm font-medium\",\n              children: expenseCategories[item.category]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 690,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: item.amount,\n              onChange: e => {\n                const newItems = [...settlementForm.items];\n                newItems[index].amount = parseFloat(e.target.value) || 0;\n                setSettlementForm({\n                  ...settlementForm,\n                  items: newItems\n                });\n              },\n              className: \"px-4 py-2 border rounded-lg\",\n              placeholder: \"0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 691,\n              columnNumber: 19\n            }, this)]\n          }, item.category, true, {\n            fileName: _jsxFileName,\n            lineNumber: 689,\n            columnNumber: 17\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border-t pt-4 space-y-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between font-semibold\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"T\\u1ED5ng chi:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 707,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-blue-600\",\n                children: [settlementForm.items.reduce((sum, item) => sum + (parseFloat(item.amount) || 0), 0).toLocaleString('vi-VN'), \" \\u0111\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 708,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 706,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between font-semibold\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"C\\xF2n l\\u1EA1i:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 713,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-green-600\",\n                children: [(selectedTransaction.amount - settlementForm.items.reduce((sum, item) => sum + (parseFloat(item.amount) || 0), 0)).toLocaleString('vi-VN'), \" \\u0111\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 714,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 712,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 705,\n            columnNumber: 15\n          }, this), selectedTransaction.amount - settlementForm.items.reduce((sum, item) => sum + (parseFloat(item.amount) || 0), 0) > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium mb-2\",\n                children: \"X\\u1EED l\\xFD s\\u1ED1 d\\u01B0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 723,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: settlementForm.remaining_action,\n                onChange: e => setSettlementForm({\n                  ...settlementForm,\n                  remaining_action: e.target.value\n                }),\n                className: \"w-full px-4 py-2 border rounded-lg\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"hoan_quy\",\n                  children: \"Ho\\xE0n l\\u1EA1i qu\\u1EF9\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 729,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"giu_lai\",\n                  children: \"Gi\\u1EEF l\\u1EA1i ti\\u1EBFp\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 730,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"chi_phi_khac\",\n                  children: \"Ghi nh\\u1EADn chi ph\\xED kh\\xE1c\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 731,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 724,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 722,\n              columnNumber: 19\n            }, this), settlementForm.remaining_action === 'hoan_quy' && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium mb-2\",\n                children: \"Ho\\xE0n v\\xE0o t\\xE0i kho\\u1EA3n *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 737,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: settlementForm.account_id,\n                onChange: e => setSettlementForm({\n                  ...settlementForm,\n                  account_id: e.target.value\n                }),\n                className: \"w-full px-4 py-2 border rounded-lg\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Ch\\u1ECDn t\\xE0i kho\\u1EA3n\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 743,\n                  columnNumber: 25\n                }, this), cashAccounts.filter(acc => acc.trang_thai === 'active').map(acc => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: acc.id,\n                  children: acc.ten\n                }, acc.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 745,\n                  columnNumber: 27\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 738,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 736,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium mb-2\",\n              children: \"Ghi ch\\xFA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 754,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: settlementForm.note,\n              onChange: e => setSettlementForm({\n                ...settlementForm,\n                note: e.target.value\n              }),\n              placeholder: \"Ghi ch\\xFA v\\u1EC1 quy\\u1EBFt to\\xE1n...\",\n              className: \"w-full px-4 py-2 border rounded-lg\",\n              rows: \"2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 755,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 753,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 666,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border-t px-6 py-4 flex justify-end gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setShowSettlementModal(false);\n              setSelectedTransaction(null);\n              setSettlementForm({\n                items: [{\n                  category: 'chi_phi_co_dinh',\n                  amount: 0\n                }, {\n                  category: 'chi_phi_san_xuat',\n                  amount: 0\n                }, {\n                  category: 'chi_phi_nguyen_vat_lieu',\n                  amount: 0\n                }, {\n                  category: 'chi_phi_sua_may',\n                  amount: 0\n                }, {\n                  category: 'chi_phi_van_chuyen',\n                  amount: 0\n                }, {\n                  category: 'chi_phi_khac',\n                  amount: 0\n                }],\n                remaining_action: 'hoan_quy',\n                account_id: '',\n                note: ''\n              });\n            },\n            className: \"px-4 py-2 border rounded-lg hover:bg-gray-50\",\n            children: \"H\\u1EE7y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 765,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSettlement,\n            className: \"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\",\n            children: \"Quy\\u1EBFt to\\xE1n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 787,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 764,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 659,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 658,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 349,\n    columnNumber: 5\n  }, this);\n}\n_s(AdvanceTransaction, \"XOpLyZIfw2yiIA13NGRwcbO/wMQ=\");\n_c = AdvanceTransaction;\nexport default AdvanceTransaction;\nvar _c;\n$RefreshReg$(_c, \"AdvanceTransaction\");","map":{"version":3,"names":["React","useState","useEffect","Plus","Search","Eye","TrendingDown","TrendingUp","DollarSign","Calendar","FileText","Upload","Download","XLSX","jsxDEV","_jsxDEV","Fragment","_Fragment","removeVietnameseTones","str","normalize","replace","AdvanceTransaction","_s","loadEmployees","saved","localStorage","getItem","JSON","parse","loadCashAccounts","loadCashTransactions","loadAdvanceTransactions","loadSettlements","employees","cashAccounts","setCashAccounts","cashTransactions","setCashTransactions","transactions","setTransactions","settlements","setSettlements","searchTerm","setSearchTerm","filterMonth","setFilterMonth","Date","toISOString","slice","filterStatus","setFilterStatus","showAddModal","setShowAddModal","showSettlementModal","setShowSettlementModal","showBatchRefundModal","setShowBatchRefundModal","selectedTransaction","setSelectedTransaction","selectedEmployee","setSelectedEmployee","addForm","setAddForm","type","emp_id","amount","date","reason","account_id","note","settlementForm","setSettlementForm","items","category","remaining_action","expenseCategories","chi_phi_co_dinh","chi_phi_san_xuat","chi_phi_nguyen_vat_lieu","chi_phi_sua_may","chi_phi_van_chuyen","chi_phi_khac","setItem","stringify","getEmployeeName","empId","emp","find","e","id","code","name","getAccountName","accountId","account","acc","ten","handleAddTransaction","alert","parseFloat","parseInt","so_du","toLocaleString","newTransaction","now","status","created_date","updatedAccounts","map","cashTransaction","tai_khoan_id","ngay","loai","danh_muc","doi_tuong","ten_doi_tuong","so_tien","ly_do","ghi_chu","nguoi_tao","ngay_tao","handleSettlement","totalSpent","reduce","sum","item","remaining","newSettlement","transaction_id","settlement_date","filter","total_spent","t","refundTransaction","handleBatchRefund","empTransactions","handleImportExcel","file","target","files","reader","FileReader","onload","evt","data","Uint8Array","result","workbook","read","sheet","Sheets","SheetNames","jsonData","utils","sheet_to_json","newItems","row","r","error","readAsArrayBuffer","handleExportTemplate","Object","entries","key","value","ws","json_to_sheet","wb","book_new","book_append_sheet","writeFile","getSummary","monthTransactions","filteredTransactions","totalChi","totalThu","chuaQuyetToan","daQuyetToan","count","length","startsWith","searchLower","toLowerCase","empName","searchableFields","some","field","includes","sort","a","b","summary","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onChange","placeholder","toFixed","transaction","toLocaleDateString","title","settlement","s","trang_thai","rows","accept","index","_c","$RefreshReg$"],"sources":["C:/Projects/app/src/pages/AdvanceTransaction.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Plus, Search, Eye, TrendingDown, TrendingUp, DollarSign, Calendar, FileText, Upload, Download } from 'lucide-react';\r\nimport * as XLSX from 'xlsx';\r\n\r\nconst removeVietnameseTones = (str) => {\r\n  return str\r\n    .normalize('NFD')\r\n    .replace(/[\\u0300-\\u036f]/g, '')\r\n    .replace(/đ/g, 'd')\r\n    .replace(/Đ/g, 'D');\r\n};\r\n\r\nfunction AdvanceTransaction() {\r\n  const loadEmployees = () => {\r\n    const saved = localStorage.getItem('employees_v2');\r\n    return saved ? JSON.parse(saved) : [];\r\n  };\r\n\r\n  const loadCashAccounts = () => {\r\n    const saved = localStorage.getItem('cash_accounts');\r\n    return saved ? JSON.parse(saved) : [];\r\n  };\r\n\r\n  const loadCashTransactions = () => {\r\n    const saved = localStorage.getItem('cash_transactions');\r\n    return saved ? JSON.parse(saved) : [];\r\n  };\r\n\r\n  const loadAdvanceTransactions = () => {\r\n    const saved = localStorage.getItem('advance_transactions');\r\n    return saved ? JSON.parse(saved) : [];\r\n  };\r\n\r\n  const loadSettlements = () => {\r\n    const saved = localStorage.getItem('advance_settlements');\r\n    return saved ? JSON.parse(saved) : [];\r\n  };\r\n\r\n  const [employees] = useState(loadEmployees);\r\n  const [cashAccounts, setCashAccounts] = useState(loadCashAccounts);\r\n  const [cashTransactions, setCashTransactions] = useState(loadCashTransactions);\r\n  const [transactions, setTransactions] = useState(loadAdvanceTransactions);\r\n  const [settlements, setSettlements] = useState(loadSettlements);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterMonth, setFilterMonth] = useState(new Date().toISOString().slice(0, 7));\r\n  const [filterStatus, setFilterStatus] = useState('all');\r\n  const [showAddModal, setShowAddModal] = useState(false);\r\n  const [showSettlementModal, setShowSettlementModal] = useState(false);\r\n  const [showBatchRefundModal, setShowBatchRefundModal] = useState(false);\r\n  const [selectedTransaction, setSelectedTransaction] = useState(null);\r\n  const [selectedEmployee, setSelectedEmployee] = useState(null);\r\n\r\n  const [addForm, setAddForm] = useState({\r\n    type: 'chi',\r\n    emp_id: '',\r\n    amount: '',\r\n    date: new Date().toISOString().slice(0, 10),\r\n    reason: 'Mua vật tư',\r\n    account_id: '',\r\n    note: ''\r\n  });\r\n\r\n  const [settlementForm, setSettlementForm] = useState({\r\n    items: [\r\n      { category: 'chi_phi_co_dinh', amount: 0 },\r\n      { category: 'chi_phi_san_xuat', amount: 0 },\r\n      { category: 'chi_phi_nguyen_vat_lieu', amount: 0 },\r\n      { category: 'chi_phi_sua_may', amount: 0 },\r\n      { category: 'chi_phi_van_chuyen', amount: 0 },\r\n      { category: 'chi_phi_khac', amount: 0 }\r\n    ],\r\n    remaining_action: 'hoan_quy',\r\n    account_id: '',\r\n    note: ''\r\n  });\r\n\r\n  const expenseCategories = {\r\n    chi_phi_co_dinh: 'Chi phí cố định',\r\n    chi_phi_san_xuat: 'Chi phí sản xuất',\r\n    chi_phi_nguyen_vat_lieu: 'Chi phí nguyên vật liệu',\r\n    chi_phi_sua_may: 'Chi phí sửa máy móc',\r\n    chi_phi_van_chuyen: 'Chi phí vận chuyển',\r\n    chi_phi_khac: 'Chi phí khác'\r\n  };\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('advance_transactions', JSON.stringify(transactions));\r\n  }, [transactions]);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('advance_settlements', JSON.stringify(settlements));\r\n  }, [settlements]);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('cash_accounts', JSON.stringify(cashAccounts));\r\n  }, [cashAccounts]);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('cash_transactions', JSON.stringify(cashTransactions));\r\n  }, [cashTransactions]);\r\n\r\n  const getEmployeeName = (empId) => {\r\n    const emp = employees.find(e => e.id === empId);\r\n    return emp ? `${emp.code} - ${emp.name}` : 'N/A';\r\n  };\r\n\r\n  const getAccountName = (accountId) => {\r\n    const account = cashAccounts.find(acc => acc.id === accountId);\r\n    return account ? account.ten : 'N/A';\r\n  };\r\n\r\n  const handleAddTransaction = () => {\r\n    if (!addForm.emp_id || !addForm.amount || !addForm.account_id) {\r\n      alert('Vui lòng điền đầy đủ thông tin!');\r\n      return;\r\n    }\r\n\r\n    const amount = parseFloat(addForm.amount);\r\n    if (amount <= 0) {\r\n      alert('Số tiền phải lớn hơn 0!');\r\n      return;\r\n    }\r\n\r\n    const account = cashAccounts.find(acc => acc.id === parseInt(addForm.account_id));\r\n    \r\n    if (addForm.type === 'chi' && account.so_du < amount) {\r\n      alert(`Số dư không đủ!\\nSố dư: ${account.so_du.toLocaleString('vi-VN')} đ\\nCần: ${amount.toLocaleString('vi-VN')} đ`);\r\n      return;\r\n    }\r\n\r\n    const newTransaction = {\r\n      id: Date.now(),\r\n      type: addForm.type,\r\n      emp_id: parseInt(addForm.emp_id),\r\n      amount: amount,\r\n      date: addForm.date,\r\n      reason: addForm.reason,\r\n      account_id: parseInt(addForm.account_id),\r\n      status: 'chua_quyet_toan',\r\n      note: addForm.note,\r\n      created_date: new Date().toISOString()\r\n    };\r\n\r\n    // Update cash account\r\n    const updatedAccounts = cashAccounts.map(acc => {\r\n      if (acc.id === parseInt(addForm.account_id)) {\r\n        return {\r\n          ...acc,\r\n          so_du: addForm.type === 'chi' ? acc.so_du - amount : acc.so_du + amount\r\n        };\r\n      }\r\n      return acc;\r\n    });\r\n    setCashAccounts(updatedAccounts);\r\n\r\n    // Create cash transaction\r\n    const cashTransaction = {\r\n      id: Date.now() + 1,\r\n      tai_khoan_id: parseInt(addForm.account_id),\r\n      ngay: addForm.date,\r\n      loai: addForm.type === 'chi' ? 'chi' : 'thu',\r\n      danh_muc: 'tam_ung_nv',\r\n      doi_tuong: getEmployeeName(parseInt(addForm.emp_id)),\r\n      ten_doi_tuong: getEmployeeName(parseInt(addForm.emp_id)),\r\n      so_tien: amount,\r\n      ly_do: addForm.reason,\r\n      ghi_chu: `Tạm ứng - ${addForm.note}`,\r\n      nguoi_tao: 'Admin',\r\n      ngay_tao: new Date().toISOString()\r\n    };\r\n    setCashTransactions([...cashTransactions, cashTransaction]);\r\n\r\n    setTransactions([...transactions, newTransaction]);\r\n    setShowAddModal(false);\r\n    setAddForm({\r\n      type: 'chi',\r\n      emp_id: '',\r\n      amount: '',\r\n      date: new Date().toISOString().slice(0, 10),\r\n      reason: 'Mua vật tư',\r\n      account_id: '',\r\n      note: ''\r\n    });\r\n    alert(`Đã ${addForm.type === 'chi' ? 'chi' : 'thu'} tạm ứng thành công!`);\r\n  };\r\n\r\n  const handleSettlement = () => {\r\n    if (!selectedTransaction) return;\r\n\r\n    const totalSpent = settlementForm.items.reduce((sum, item) => sum + parseFloat(item.amount || 0), 0);\r\n    const remaining = selectedTransaction.amount - totalSpent;\r\n\r\n    if (totalSpent > selectedTransaction.amount) {\r\n      alert('Tổng chi vượt quá số tiền tạm ứng!');\r\n      return;\r\n    }\r\n\r\n    if (remaining > 0 && !settlementForm.account_id) {\r\n      alert('Vui lòng chọn tài khoản để hoàn tiền!');\r\n      return;\r\n    }\r\n\r\n    const newSettlement = {\r\n      id: Date.now(),\r\n      transaction_id: selectedTransaction.id,\r\n      settlement_date: new Date().toISOString().slice(0, 10),\r\n      items: settlementForm.items.filter(item => item.amount > 0),\r\n      total_spent: totalSpent,\r\n      remaining: remaining,\r\n      remaining_action: settlementForm.remaining_action,\r\n      account_id: settlementForm.account_id ? parseInt(settlementForm.account_id) : null,\r\n      note: settlementForm.note,\r\n      created_date: new Date().toISOString()\r\n    };\r\n\r\n    setSettlements([...settlements, newSettlement]);\r\n\r\n    // Update transaction status\r\n    setTransactions(transactions.map(t =>\r\n      t.id === selectedTransaction.id\r\n        ? { ...t, status: 'da_quyet_toan' }\r\n        : t\r\n    ));\r\n\r\n    // Refund to cash account if needed\r\n    if (remaining > 0 && settlementForm.remaining_action === 'hoan_quy') {\r\n      const updatedAccounts = cashAccounts.map(acc => {\r\n        if (acc.id === parseInt(settlementForm.account_id)) {\r\n          return { ...acc, so_du: acc.so_du + remaining };\r\n        }\r\n        return acc;\r\n      });\r\n      setCashAccounts(updatedAccounts);\r\n\r\n      // Create refund cash transaction\r\n      const refundTransaction = {\r\n        id: Date.now() + 1,\r\n        tai_khoan_id: parseInt(settlementForm.account_id),\r\n        ngay: new Date().toISOString().slice(0, 10),\r\n        loai: 'thu',\r\n        danh_muc: 'tam_ung_nv',\r\n        doi_tuong: getEmployeeName(selectedTransaction.emp_id),\r\n        ten_doi_tuong: getEmployeeName(selectedTransaction.emp_id),\r\n        so_tien: remaining,\r\n        ly_do: `Hoàn tạm ứng - ${selectedTransaction.reason}`,\r\n        ghi_chu: settlementForm.note,\r\n        nguoi_tao: 'Admin',\r\n        ngay_tao: new Date().toISOString()\r\n      };\r\n      setCashTransactions([...cashTransactions, refundTransaction]);\r\n    }\r\n\r\n    setShowSettlementModal(false);\r\n    setSelectedTransaction(null);\r\n    setSettlementForm({\r\n      items: [\r\n        { category: 'chi_phi_co_dinh', amount: 0 },\r\n        { category: 'chi_phi_san_xuat', amount: 0 },\r\n        { category: 'chi_phi_nguyen_vat_lieu', amount: 0 },\r\n        { category: 'chi_phi_sua_may', amount: 0 },\r\n        { category: 'chi_phi_van_chuyen', amount: 0 },\r\n        { category: 'chi_phi_khac', amount: 0 }\r\n      ],\r\n      remaining_action: 'hoan_quy',\r\n      account_id: '',\r\n      note: ''\r\n    });\r\n    alert('Đã quyết toán thành công!');\r\n  };\r\n\r\n  const handleBatchRefund = (empId) => {\r\n    const empTransactions = transactions.filter(t =>\r\n      t.emp_id === empId &&\r\n      t.type === 'chi' &&\r\n      t.status === 'chua_quyet_toan'\r\n    );\r\n\r\n    setSelectedEmployee(empId);\r\n    setShowBatchRefundModal(true);\r\n  };\r\n\r\n  const handleImportExcel = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = (evt) => {\r\n      try {\r\n        const data = new Uint8Array(evt.target.result);\r\n        const workbook = XLSX.read(data, { type: 'array' });\r\n        const sheet = workbook.Sheets[workbook.SheetNames[0]];\r\n        const jsonData = XLSX.utils.sheet_to_json(sheet);\r\n\r\n        const newItems = settlementForm.items.map(item => {\r\n          const row = jsonData.find(r => r['Loại chi phí'] === expenseCategories[item.category]);\r\n          return {\r\n            category: item.category,\r\n            amount: row ? parseFloat(row['Số tiền']) || 0 : 0\r\n          };\r\n        });\r\n\r\n        setSettlementForm({ ...settlementForm, items: newItems });\r\n        alert('Đã nhập dữ liệu từ Excel!');\r\n      } catch (error) {\r\n        alert('Lỗi đọc file Excel!');\r\n      }\r\n    };\r\n    reader.readAsArrayBuffer(file);\r\n  };\r\n\r\n  const handleExportTemplate = () => {\r\n    const data = Object.entries(expenseCategories).map(([key, value]) => ({\r\n      'Loại chi phí': value,\r\n      'Số tiền': 0\r\n    }));\r\n\r\n    const ws = XLSX.utils.json_to_sheet(data);\r\n    const wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, ws, 'Template');\r\n    XLSX.writeFile(wb, 'Mau-quyet-toan.xlsx');\r\n  };\r\n\r\n  const getSummary = () => {\r\n    const monthTransactions = filteredTransactions;\r\n    const totalChi = monthTransactions.filter(t => t.type === 'chi').reduce((sum, t) => sum + t.amount, 0);\r\n    const totalThu = monthTransactions.filter(t => t.type === 'thu').reduce((sum, t) => sum + t.amount, 0);\r\n    const chuaQuyetToan = monthTransactions.filter(t => t.status === 'chua_quyet_toan').reduce((sum, t) => sum + t.amount, 0);\r\n    const daQuyetToan = monthTransactions.filter(t => t.status === 'da_quyet_toan').reduce((sum, t) => sum + t.amount, 0);\r\n\r\n    return { totalChi, totalThu, chuaQuyetToan, daQuyetToan, count: monthTransactions.length };\r\n  };\r\n\r\n  const filteredTransactions = transactions.filter(t => {\r\n    if (!t.date.startsWith(filterMonth)) return false;\r\n    if (filterStatus !== 'all' && t.status !== filterStatus) return false;\r\n    if (!searchTerm) return true;\r\n\r\n    const searchLower = removeVietnameseTones(searchTerm.toLowerCase());\r\n    const empName = getEmployeeName(t.emp_id);\r\n    const searchableFields = [empName, t.reason || '', t.note || ''];\r\n    return searchableFields.some(field =>\r\n      removeVietnameseTones(field.toLowerCase()).includes(searchLower)\r\n    );\r\n  }).sort((a, b) => new Date(b.date) - new Date(a.date));\r\n\r\n  const summary = getSummary();\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-gray-800\">Giao dịch tạm ứng</h1>\r\n          <p className=\"text-gray-600\">Quản lý tạm ứng mua hàng & thu chi</p>\r\n        </div>\r\n        <button\r\n          onClick={() => setShowAddModal(true)}\r\n          className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2\"\r\n        >\r\n          <Plus className=\"w-5 h-5\" />Thêm giao dịch\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-xl shadow-sm border p-4\">\r\n        <div className=\"grid grid-cols-3 gap-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">Tháng</label>\r\n            <input\r\n              type=\"month\"\r\n              value={filterMonth}\r\n              onChange={(e) => setFilterMonth(e.target.value)}\r\n              className=\"w-full px-4 py-2 border rounded-lg\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">Trạng thái</label>\r\n            <select\r\n              value={filterStatus}\r\n              onChange={(e) => setFilterStatus(e.target.value)}\r\n              className=\"w-full px-4 py-2 border rounded-lg\"\r\n            >\r\n              <option value=\"all\">Tất cả</option>\r\n              <option value=\"chua_quyet_toan\">Chưa quyết toán</option>\r\n              <option value=\"da_quyet_toan\">Đã quyết toán</option>\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">Tìm kiếm</label>\r\n            <div className=\"relative\">\r\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\r\n              <input\r\n                type=\"text\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                placeholder=\"Nhân viên, lý do...\"\r\n                className=\"w-full pl-10 pr-4 py-2 border rounded-lg\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {filteredTransactions.length > 0 && (\r\n        <div className=\"grid grid-cols-4 gap-4\">\r\n          <div className=\"bg-gradient-to-br from-red-500 to-red-600 rounded-xl p-6 text-white\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-red-100 text-sm\">Tổng chi</p>\r\n                <p className=\"text-2xl font-bold mt-1\">{(summary.totalChi / 1000000).toFixed(1)}M</p>\r\n              </div>\r\n              <TrendingDown className=\"w-12 h-12 text-red-200\" />\r\n            </div>\r\n          </div>\r\n          <div className=\"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-green-100 text-sm\">Tổng thu</p>\r\n                <p className=\"text-2xl font-bold mt-1\">{(summary.totalThu / 1000000).toFixed(1)}M</p>\r\n              </div>\r\n              <TrendingUp className=\"w-12 h-12 text-green-200\" />\r\n            </div>\r\n          </div>\r\n          <div className=\"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-orange-100 text-sm\">Chưa quyết toán</p>\r\n                <p className=\"text-2xl font-bold mt-1\">{(summary.chuaQuyetToan / 1000000).toFixed(1)}M</p>\r\n              </div>\r\n              <Calendar className=\"w-12 h-12 text-orange-200\" />\r\n            </div>\r\n          </div>\r\n          <div className=\"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-blue-100 text-sm\">Đã quyết toán</p>\r\n                <p className=\"text-2xl font-bold mt-1\">{(summary.daQuyetToan / 1000000).toFixed(1)}M</p>\r\n              </div>\r\n              <DollarSign className=\"w-12 h-12 text-blue-200\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"bg-white rounded-xl shadow-sm border overflow-hidden\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead className=\"bg-gray-50\">\r\n              <tr>\r\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Ngày</th>\r\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Loại</th>\r\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Nhân viên</th>\r\n                <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Lý do</th>\r\n                <th className=\"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase\">Số tiền</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase\">Trạng thái</th>\r\n                <th className=\"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase\">Thao tác</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y\">\r\n              {filteredTransactions.map(transaction => (\r\n                <tr key={transaction.id} className=\"hover:bg-gray-50\">\r\n                  <td className=\"px-4 py-4 text-sm\">\r\n                    {new Date(transaction.date).toLocaleDateString('vi-VN')}\r\n                  </td>\r\n                  <td className=\"px-4 py-4\">\r\n                    <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                      transaction.type === 'chi'\r\n                        ? 'bg-red-100 text-red-800'\r\n                        : 'bg-green-100 text-green-800'\r\n                    }`}>\r\n                      {transaction.type === 'chi' ? 'Chi' : 'Thu'}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-4 py-4 text-sm\">{getEmployeeName(transaction.emp_id)}</td>\r\n                  <td className=\"px-4 py-4 text-sm text-gray-600\">{transaction.reason}</td>\r\n                  <td className=\"px-4 py-4 text-sm text-right\">\r\n                    <span className={`font-bold ${\r\n                      transaction.type === 'chi' ? 'text-red-600' : 'text-green-600'\r\n                    }`}>\r\n                      {transaction.type === 'chi' ? '-' : '+'}{transaction.amount.toLocaleString('vi-VN')} đ\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-4 py-4 text-center\">\r\n                    <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                      transaction.status === 'chua_quyet_toan'\r\n                        ? 'bg-orange-100 text-orange-800'\r\n                        : 'bg-green-100 text-green-800'\r\n                    }`}>\r\n                      {transaction.status === 'chua_quyet_toan' ? 'Chưa quyết toán' : 'Đã quyết toán'}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-4 py-4\">\r\n                    <div className=\"flex justify-center gap-2\">\r\n                      {transaction.type === 'chi' && transaction.status === 'chua_quyet_toan' && (\r\n                        <button\r\n                          onClick={() => {\r\n                            setSelectedTransaction(transaction);\r\n                            setShowSettlementModal(true);\r\n                          }}\r\n                          className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg\"\r\n                          title=\"Quyết toán\"\r\n                        >\r\n                          <FileText className=\"w-4 h-4\" />\r\n                        </button>\r\n                      )}\r\n                      {transaction.status === 'da_quyet_toan' && (\r\n                        <button\r\n                          onClick={() => {\r\n                            const settlement = settlements.find(s => s.transaction_id === transaction.id);\r\n                            if (settlement) {\r\n                              alert(`Đã quyết toán:\\nTổng chi: ${settlement.total_spent.toLocaleString('vi-VN')} đ\\nCòn lại: ${settlement.remaining.toLocaleString('vi-VN')} đ`);\r\n                            }\r\n                          }}\r\n                          className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg\"\r\n                          title=\"Xem chi tiết\"\r\n                        >\r\n                          <Eye className=\"w-4 h-4\" />\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        {filteredTransactions.length === 0 && (\r\n          <div className=\"text-center py-12 text-gray-500\">Không có giao dịch nào</div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Add Transaction Modal */}\r\n      {showAddModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-2xl\">\r\n            <div className=\"border-b px-6 py-4\">\r\n              <h2 className=\"text-xl font-bold\">Thêm giao dịch tạm ứng</h2>\r\n            </div>\r\n            <div className=\"p-6 space-y-4\">\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Loại giao dịch *</label>\r\n                  <select\r\n                    value={addForm.type}\r\n                    onChange={(e) => setAddForm({ ...addForm, type: e.target.value })}\r\n                    className=\"w-full px-4 py-2 border rounded-lg\"\r\n                  >\r\n                    <option value=\"chi\">Chi tạm ứng</option>\r\n                    <option value=\"thu\">Thu tiền</option>\r\n                  </select>\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Ngày *</label>\r\n                  <input\r\n                    type=\"date\"\r\n                    value={addForm.date}\r\n                    onChange={(e) => setAddForm({ ...addForm, date: e.target.value })}\r\n                    className=\"w-full px-4 py-2 border rounded-lg\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Nhân viên *</label>\r\n                  <select\r\n                    value={addForm.emp_id}\r\n                    onChange={(e) => setAddForm({ ...addForm, emp_id: e.target.value })}\r\n                    className=\"w-full px-4 py-2 border rounded-lg\"\r\n                  >\r\n                    <option value=\"\">Chọn nhân viên</option>\r\n                    {employees.filter(e => e.status !== 'Nghỉ việc').map(emp => (\r\n                      <option key={emp.id} value={emp.id}>\r\n                        {emp.code} - {emp.name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">Số tiền *</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={addForm.amount}\r\n                    onChange={(e) => setAddForm({ ...addForm, amount: e.target.value })}\r\n                    placeholder=\"VD: 10000000\"\r\n                    className=\"w-full px-4 py-2 border rounded-lg\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Lý do *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={addForm.reason}\r\n                  onChange={(e) => setAddForm({ ...addForm, reason: e.target.value })}\r\n                  placeholder=\"Mua vật tư, Đi công tác...\"\r\n                  className=\"w-full px-4 py-2 border rounded-lg\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Tài khoản *</label>\r\n                <select\r\n                  value={addForm.account_id}\r\n                  onChange={(e) => setAddForm({ ...addForm, account_id: e.target.value })}\r\n                  className=\"w-full px-4 py-2 border rounded-lg\"\r\n                >\r\n                  <option value=\"\">Chọn tài khoản</option>\r\n                  {cashAccounts.filter(acc => acc.trang_thai === 'active').map(acc => (\r\n                    <option key={acc.id} value={acc.id}>\r\n                      {acc.ten} ({acc.so_du.toLocaleString('vi-VN')} đ)\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Ghi chú</label>\r\n                <textarea\r\n                  value={addForm.note}\r\n                  onChange={(e) => setAddForm({ ...addForm, note: e.target.value })}\r\n                  placeholder=\"Ghi chú thêm...\"\r\n                  className=\"w-full px-4 py-2 border rounded-lg\"\r\n                  rows=\"2\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"border-t px-6 py-4 flex justify-end gap-2\">\r\n              <button\r\n                onClick={() => {\r\n                  setShowAddModal(false);\r\n                  setAddForm({\r\n                    type: 'chi',\r\n                    emp_id: '',\r\n                    amount: '',\r\n                    date: new Date().toISOString().slice(0, 10),\r\n                    reason: 'Mua vật tư',\r\n                    account_id: '',\r\n                    note: ''\r\n                  });\r\n                }}\r\n                className=\"px-4 py-2 border rounded-lg hover:bg-gray-50\"\r\n              >\r\n                Hủy\r\n              </button>\r\n              <button\r\n                onClick={handleAddTransaction}\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\r\n              >\r\n                Thêm\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Settlement Modal */}\r\n      {showSettlementModal && selectedTransaction && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"sticky top-0 bg-white border-b px-6 py-4\">\r\n              <h2 className=\"text-xl font-bold\">Quyết toán tạm ứng</h2>\r\n              <p className=\"text-sm text-gray-600\">\r\n                {getEmployeeName(selectedTransaction.emp_id)} - {selectedTransaction.amount.toLocaleString('vi-VN')} đ\r\n              </p>\r\n            </div>\r\n            <div className=\"p-6 space-y-4\">\r\n              <div className=\"flex justify-between items-center mb-4\">\r\n                <h3 className=\"font-semibold\">Chi tiết chi phí</h3>\r\n                <div className=\"flex gap-2\">\r\n                  <button\r\n                    onClick={handleExportTemplate}\r\n                    className=\"px-3 py-1 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-1\"\r\n                  >\r\n                    <Download className=\"w-4 h-4\" />Tải mẫu\r\n                  </button>\r\n                  <label className=\"px-3 py-1 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-1 cursor-pointer\">\r\n                    <Upload className=\"w-4 h-4\" />Nhập Excel\r\n                    <input\r\n                      type=\"file\"\r\n                      accept=\".xlsx,.xls\"\r\n                      onChange={handleImportExcel}\r\n                      className=\"hidden\"\r\n                    />\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n              {settlementForm.items.map((item, index) => (\r\n                <div key={item.category} className=\"grid grid-cols-2 gap-4 items-center\">\r\n                  <label className=\"text-sm font-medium\">{expenseCategories[item.category]}</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={item.amount}\r\n                    onChange={(e) => {\r\n                      const newItems = [...settlementForm.items];\r\n                      newItems[index].amount = parseFloat(e.target.value) || 0;\r\n                      setSettlementForm({ ...settlementForm, items: newItems });\r\n                    }}\r\n                    className=\"px-4 py-2 border rounded-lg\"\r\n                    placeholder=\"0\"\r\n                  />\r\n                </div>\r\n              ))}\r\n\r\n              <div className=\"border-t pt-4 space-y-2\">\r\n                <div className=\"flex justify-between font-semibold\">\r\n                  <span>Tổng chi:</span>\r\n                  <span className=\"text-blue-600\">\r\n                    {settlementForm.items.reduce((sum, item) => sum + (parseFloat(item.amount) || 0), 0).toLocaleString('vi-VN')} đ\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex justify-between font-semibold\">\r\n                  <span>Còn lại:</span>\r\n                  <span className=\"text-green-600\">\r\n                    {(selectedTransaction.amount - settlementForm.items.reduce((sum, item) => sum + (parseFloat(item.amount) || 0), 0)).toLocaleString('vi-VN')} đ\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              {(selectedTransaction.amount - settlementForm.items.reduce((sum, item) => sum + (parseFloat(item.amount) || 0), 0)) > 0 && (\r\n                <>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium mb-2\">Xử lý số dư</label>\r\n                    <select\r\n                      value={settlementForm.remaining_action}\r\n                      onChange={(e) => setSettlementForm({ ...settlementForm, remaining_action: e.target.value })}\r\n                      className=\"w-full px-4 py-2 border rounded-lg\"\r\n                    >\r\n                      <option value=\"hoan_quy\">Hoàn lại quỹ</option>\r\n                      <option value=\"giu_lai\">Giữ lại tiếp</option>\r\n                      <option value=\"chi_phi_khac\">Ghi nhận chi phí khác</option>\r\n                    </select>\r\n                  </div>\r\n\r\n                  {settlementForm.remaining_action === 'hoan_quy' && (\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium mb-2\">Hoàn vào tài khoản *</label>\r\n                      <select\r\n                        value={settlementForm.account_id}\r\n                        onChange={(e) => setSettlementForm({ ...settlementForm, account_id: e.target.value })}\r\n                        className=\"w-full px-4 py-2 border rounded-lg\"\r\n                      >\r\n                        <option value=\"\">Chọn tài khoản</option>\r\n                        {cashAccounts.filter(acc => acc.trang_thai === 'active').map(acc => (\r\n                          <option key={acc.id} value={acc.id}>{acc.ten}</option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n                  )}\r\n                </>\r\n              )}\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Ghi chú</label>\r\n                <textarea\r\n                  value={settlementForm.note}\r\n                  onChange={(e) => setSettlementForm({ ...settlementForm, note: e.target.value })}\r\n                  placeholder=\"Ghi chú về quyết toán...\"\r\n                  className=\"w-full px-4 py-2 border rounded-lg\"\r\n                  rows=\"2\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"border-t px-6 py-4 flex justify-end gap-2\">\r\n              <button\r\n                onClick={() => {\r\n                  setShowSettlementModal(false);\r\n                  setSelectedTransaction(null);\r\n                  setSettlementForm({\r\n                    items: [\r\n                      { category: 'chi_phi_co_dinh', amount: 0 },\r\n                      { category: 'chi_phi_san_xuat', amount: 0 },\r\n                      { category: 'chi_phi_nguyen_vat_lieu', amount: 0 },\r\n                      { category: 'chi_phi_sua_may', amount: 0 },\r\n                      { category: 'chi_phi_van_chuyen', amount: 0 },\r\n                      { category: 'chi_phi_khac', amount: 0 }\r\n                    ],\r\n                    remaining_action: 'hoan_quy',\r\n                    account_id: '',\r\n                    note: ''\r\n                  });\r\n                }}\r\n                className=\"px-4 py-2 border rounded-lg hover:bg-gray-50\"\r\n              >\r\n                Hủy\r\n              </button>\r\n              <button\r\n                onClick={handleSettlement}\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\r\n              >\r\n                Quyết toán\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdvanceTransaction;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}